---
title:      "伪元素实现自定义滚动条"
date:       2017-11-29
tags:
    - JS/TS
---

# 伪元素实现自定义滚动条

<h2 id="从伪类和伪元素说起"><a href="#从伪类和伪元素说起" class="headerlink" title="从伪类和伪元素说起"></a>从伪类和伪元素说起</h2><blockquote>
<p>CSS3中规定:伪类(Pseodu-classes)用<span style="color: #ff0000;">一个冒号</span>来表示，而伪元素(Pseodu-elements)则用<span style="color: #ff0000;">两个冒号</span>来表示.(低版本IE不支持单冒号)<br><strong>区别 :</strong> 伪类的效果可以通过添加一个实际的<span style="color: #ff0000;">类</span>来达到，而伪元素的效果则需要通过添加一个实际的<span style="color: #ff0000;">元素</span>才能达到, 伪元素无法使用DOM操作控制, 而伪元素能实现的功能基本可以使用实元素实现, 一般情况下尽量不要使用, 增加了维护的难度.</p>
</blockquote>
<h4 id="常用的伪类"><a href="#常用的伪类" class="headerlink" title="常用的伪类"></a>常用的伪类</h4><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">:active      //向被激活的元素添加样式</span><br><span class="line">:focus       //向拥有键盘输入焦点的元素添加样式</span><br><span class="line">:hover       //当鼠标悬浮在元素上方时，向元素添加样式</span><br><span class="line">:link        //向未被访问的链接添加样式</span><br><span class="line">:visited     //向已被访问的链接添加样式</span><br><span class="line">:first-child //向元素的第一个子元素添加样式</span><br><span class="line">:lang        //向带有指定 lang 属性的元素添加样式</span><br></pre></td></tr></tbody></table></figure>

<h4 id="常用的伪元素"><a href="#常用的伪元素" class="headerlink" title="常用的伪元素"></a>常用的伪元素</h4><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">::first-letter //向文本的第一个字母添加特殊样式</span><br><span class="line">::first-line   //向文本的首行添加特殊样式</span><br><span class="line">::before       //在元素之前添加内容</span><br><span class="line">::after        //在元素之后添加内容</span><br><span class="line">::selection    //在被选取的部分添加样式</span><br></pre></td></tr></tbody></table></figure>

<p>before,after详细用法 [Mark:<a href="//blog.dimpurr.com/css-before-after/" target="_blank">//blog.dimpurr.com/css-before-after/</a>]</p>
<h2 id="Chrome下滚动条相关伪元素和伪类"><a href="#Chrome下滚动条相关伪元素和伪类" class="headerlink" title="Chrome下滚动条相关伪元素和伪类"></a>Chrome下滚动条相关伪元素和伪类</h2><p>伪元素</p>
<ul><li><span style="color: #ff0000;">::-webkit-scrollbar</span> 滚动条整体部分</li><li><span style="color: #ff0000;">::-webkit-scrollbar-thumb</span> 滚动条里面的小方块</li><li><span style="color: #ff0000;">::-webkit-scrollbar-track</span> 滚动条的外轨道,包含内轨道</li><li><span style="color: #ff0000;">::-webkit-scrollbar-button</span> 滚动条的轨道的两端按钮，允许通过点击微调小方块的位置。</li><li><span style="color: #ff0000;">::-webkit-scrollbar-track-piece</span> 内层轨道，滚动条中间部分,包含滑块</li><li><span style="color: #ff0000;">::-webkit-scrollbar-corner</span> 边角 即两个滚动条的交汇处</li><li><span style="color: #ff0000;">::-webkit-resizer&nbsp;</span>两个滚动条的交汇处上用于通过拖动调整元素大小的小控件</li>
</ul>
伪类
<ul><li><span style="color: #ff0000;">:horizontal</span> 水平滚动条</li><li><span style="color: #ff0000;">:vertical</span> 竖直滚动条</li><li><span style="color: #ff0000;">:decrement</span> 微调(向上或向左)按钮(小箭头,自定义)</li><li><span style="color: #ff0000;">:increment</span> 微调(向下或向右)按钮</li></ul>

<p>一个自定义滚动条的CSS示例</p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*定义滚动条宽度(竖直)和高度(水平)*/</span></span><br><span class="line">::-webkit-scrollbar {</span><br><span class="line">    width: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">8px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*定义滚动条轨道 内阴影+圆角*/</span></span><br><span class="line">::-webkit-scrollbar-track {</span><br><span class="line">    -webkit-box-shadow: inset <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.3</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#FFF</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/*定义竖向的滑块 内阴影+圆角*/</span></span><br><span class="line">::-webkit-scrollbar-thumb:vertical {</span><br><span class="line">    border-radius: <span class="number">10px</span>;</span><br><span class="line">    -webkit-<span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">3</span>);</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#CCC</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="jQuery大法实现多浏览器兼容的酷炫滚动条"><a href="#jQuery大法实现多浏览器兼容的酷炫滚动条" class="headerlink" title="jQuery大法实现多浏览器兼容的酷炫滚动条"></a>jQuery大法实现多浏览器兼容的酷炫滚动条</h4><p>有很多提供浏览器兼容的scrollbar插件,比如:<a target="_blank" href="https://github.com/noraesae/perfect-scrollbar.git">perfect-scrollbar插件</a>, 其使用方式如下</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#container必须是position:relative;height有固定值的块级元素</span></span><br><span class="line"><span class="comment">//初始化</span></span><br><span class="line">$(<span class="string">'#container'</span>).perfectScrollbar();</span><br><span class="line">$(<span class="string">'#container'</span>).perfectScrollbar({</span><br><span class="line">    <span class="attr">wheelSpeed</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">wheelPropagation</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">minScrollbarLength</span>: <span class="number">20</span></span><br><span class="line">});</span><br><span class="line"><span class="comment">//更新滚动条</span></span><br><span class="line">$(<span class="string">'#container'</span>).perfectScrollbar(<span class="string">'update'</span>);</span><br><span class="line"><span class="comment">//删除滚动条</span></span><br><span class="line">$(<span class="string">'#container'</span>).perfectScrollbar(<span class="string">'destroy'</span>); <span class="comment">// Destroy</span></span><br><span class="line"><span class="comment">//事件</span></span><br><span class="line">$(<span class="string">'#container'</span>).on(<span class="string">"ps-scroll-[x|y|up|down|left|right]"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{});</span><br><span class="line">$(<span class="string">'#container'</span>).on(<span class="string">"ps-[x|y]-reach-[start|end]"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{});</span><br></pre></td></tr></tbody></table></figure>